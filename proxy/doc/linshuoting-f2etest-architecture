{"id":1486447,"slug":"architecture","title":"整体架构","book_id":245753,"book":{"id":245753,"type":"Book","slug":"f2etest","name":"F2etest","user_id":296279,"description":"F2etest 是一个面向前端、测试、产品等岗位的多浏览器兼容性测试整体解决方案。","creator_id":94302,"public":1,"items_count":12,"likes_count":0,"watches_count":2,"content_updated_at":"2019-04-23T05:44:30.303Z","updated_at":"2019-04-23T06:32:14.000Z","created_at":"2019-03-21T03:15:48.000Z","namespace":"linshuoting/f2etest","user":{"id":94302,"type":"User","login":"linshuoting","name":"说听(Stngle)","description":"F&D艺术家   \nhttps://github.com/Stngle","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":1,"public_books_count":0,"followers_count":3,"following_count":2,"created_at":"2018-03-21T12:59:06.000Z","updated_at":"2019-04-23T05:43:09.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":182712,"creator":{"id":182712,"type":"User","login":"undead25","name":"双龙","description":null,"avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":0,"public_books_count":0,"followers_count":0,"following_count":1,"created_at":"2018-09-26T16:45:26.000Z","updated_at":"2019-04-04T03:00:41.000Z","_serializer":"v2.user"},"format":"lake","body":"","body_draft":"","body_html":"<h2 id=\"3fe918c2\">一、名词释义</h2><p><br /></p><ul><li><strong>浏览器云</strong>： 提供真实的多浏览器兼容性环境，还原真实测试场景。</li><li><strong>WebDriver</strong>：<a href=\"https://w3c.github.io/webdriver/\" target=\"_blank\">https://w3c.github.io/webdriver/</a>，WebDriver 是一个远程控制接口，可以对用户代理进行<a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E7%9C%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)\" target=\"_blank\">内省</a>和控制。它提供了一种平台和语言中立的 <a href=\"https://en.wikipedia.org/wiki/Wire_protocol\" target=\"_blank\">wire protocol</a>，来作为进程外程序远程控制 Web 浏览器行为的一种方式。</li><li><strong>WebDriver 云</strong>：基于自动化测试工具 <a href=\"https://w3c.github.io/webdriver/\" target=\"_blank\">WebDriver</a>，快速稳定的支撑自动化测试脚本的运行。</li><li><a href=\"https://guacamole.apache.org/\" target=\"_blank\"><code>Guacamole</code></a>：无客户端的远程桌面网关，通俗一点来说则是，通过浏览器实现与 Windows 服务器的远程连接（一般情况我们是使用 RDP 客户端进行远程连接的），包含 <code>guacamole-client</code> 和 <code>guacd</code> 两个模块。</li><li><strong>RemoteApp</strong>：<a href=\"https://techcommunity.microsoft.com/t5/Enterprise-Mobility-Security/Introducing-RemoteApp-and-Desktop-Connections/ba-p/246803?collapse_discussion=true&amp;q=remoteApp&amp;search_type=thread\" target=\"_blank\">RemoteApp</a> 是微软在 Windows Server 2008 之后，在其系统中集成的一项服务功能，使用户可以通过远程桌面访问远端的桌面与程序，客户端本机无须安装系统与应用程序的情况下也能正常使用远端发布的各种的桌面与应用。</li></ul><p><br /></p><h2 id=\"f455c1a7\">二、技术架构</h2><p><br /></p><p><img src=\"https://cdn.nlark.com/yuque/0/2019/png/182712/1554715508864-30b9c0f8-b614-4a51-8882-65bf7a770f25.png#align=left&amp;display=inline&amp;height=898&amp;originHeight=1650&amp;originWidth=1370&amp;size=0&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><p><br /></p><h3 id=\"c0e9cd8e\">2.1 F2etest-web</h3><p><br /></p><p><img src=\"https://cdn.nlark.com/yuque/0/2019/gif/182712/1554715508865-9c751174-69e1-47a9-b205-9bdbfed005bf.gif#align=left&amp;display=inline&amp;height=412&amp;originHeight=565&amp;originWidth=1024&amp;size=0&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><p><br /></p><p>我们将部署在 Linux 服务器上的模块统称为 F2etest-web，其主要职责是：</p><p><br /></p><ul><li>为浏览器云提供用户操作入口；</li><li>为 WebDriver 云提供负载均衡服务。<br />\n具体实现原理请参考<a href=\"https://www.yuque.com/artist/f2etest/f2etest-web\" target=\"_blank\">《F2etest-web 架构》</a></li></ul><p><br /></p><h3 id=\"459d680c\">2.2 浏览器云</h3><p><br /></p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/182712/1554716548925-e18c5310-2978-4549-a0e8-1b23b01fe0b3.png#align=left&amp;display=inline&amp;height=494&amp;name=image.png&amp;originHeight=494&amp;originWidth=878&amp;size=339228&amp;status=done&amp;width=878\" style=\"max-width: 600px; width: 878px;\" /><br /></p><p><br /></p><p>浏览器云的理念主要是“打开即用”，基于多浏览兼容测试环境搭建的痛点，我们在一批 Windows Server 集群上分别安装了不同版本的浏览器，通过远程桌面协议的方式集成至 F2etest 平台。这样，所有用户都可以 F2etest 平台直接使用不同类型的浏览器，极大降低了用户搭建和维护测试环境的成本。</p><p>具体实现原理请参考<a href=\"https://www.yuque.com/artist/f2etest/browser-cloud\" target=\"_blank\">《浏览器云架构》</a></p><p><br /></p><h3 id=\"20613dfe\">2.3 WebDriver 云</h3><p><br /></p><p><img src=\"https://cdn.nlark.com/yuque/0/2019/png/182712/1554715508862-3dd44041-2ff7-4118-8fb9-a9174abd5ff6.png#align=left&amp;display=inline&amp;height=368&amp;originHeight=721&amp;originWidth=1462&amp;size=0&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><p><br /></p><p>WebDriver 利用浏览器原生的 API，封装了一层 WebDriver API，可以直接操作浏览器页面的 DOM 节点元素，甚至操作浏览器本身（截屏，窗口大小，启动，关闭，安装插件，配置证书之类的）。WebDriver 云则是基于 WebDriver 实现的一套 WebDriver Hub 解决方案，提供并调度执行自动化测试的工作节点。</p><p>具体实现原理请参考 <a href=\"https://www.yuque.com/artist/f2etest/webdriver-cloud\" target=\"_blank\">《WebDriver 云实现原理》</a>。</p><p><br /></p>","body_lake":"<!doctype lake><h2 id=\"3fe918c2\">一、名词释义</h2><p><br /></p><ul><li><strong>浏览器云</strong>： 提供真实的多浏览器兼容性环境，还原真实测试场景。</li><li><strong>WebDriver</strong>：<a href=\"https://w3c.github.io/webdriver/\" target=\"_blank\">https://w3c.github.io/webdriver/</a>，WebDriver 是一个远程控制接口，可以对用户代理进行<a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E7%9C%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)\" target=\"_blank\">内省</a>和控制。它提供了一种平台和语言中立的 <a href=\"https://en.wikipedia.org/wiki/Wire_protocol\" target=\"_blank\">wire protocol</a>，来作为进程外程序远程控制 Web 浏览器行为的一种方式。</li><li><strong>WebDriver 云</strong>：基于自动化测试工具 <a href=\"https://w3c.github.io/webdriver/\" target=\"_blank\">WebDriver</a>，快速稳定的支撑自动化测试脚本的运行。</li><li><a href=\"https://guacamole.apache.org/\" target=\"_blank\"><code>Guacamole</code></a>：无客户端的远程桌面网关，通俗一点来说则是，通过浏览器实现与 Windows 服务器的远程连接（一般情况我们是使用 RDP 客户端进行远程连接的），包含 <code>guacamole-client</code> 和 <code>guacd</code> 两个模块。</li><li><strong>RemoteApp</strong>：<a href=\"https://techcommunity.microsoft.com/t5/Enterprise-Mobility-Security/Introducing-RemoteApp-and-Desktop-Connections/ba-p/246803?collapse_discussion=true&amp;q=remoteApp&amp;search_type=thread\" target=\"_blank\">RemoteApp</a> 是微软在 Windows Server 2008 之后，在其系统中集成的一项服务功能，使用户可以通过远程桌面访问远端的桌面与程序，客户端本机无须安装系统与应用程序的情况下也能正常使用远端发布的各种的桌面与应用。</li></ul><p><br /></p><h2 id=\"f455c1a7\">二、技术架构</h2><p><br /></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F182712%2F1554715508864-30b9c0f8-b614-4a51-8882-65bf7a770f25.png%22%2C%22originWidth%22%3A1370%2C%22originHeight%22%3A1650%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A898%7D\"></card></p><p><br /></p><h3 id=\"c0e9cd8e\">2.1 F2etest-web</h3><p><br /></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fgif%2F182712%2F1554715508865-9c751174-69e1-47a9-b205-9bdbfed005bf.gif%22%2C%22originWidth%22%3A1024%2C%22originHeight%22%3A565%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A412%7D\"></card></p><p><br /></p><p>我们将部署在 Linux 服务器上的模块统称为 F2etest-web，其主要职责是：</p><p><br /></p><ul><li>为浏览器云提供用户操作入口；</li><li>为 WebDriver 云提供负载均衡服务。<br />\n具体实现原理请参考<a href=\"https://www.yuque.com/artist/f2etest/f2etest-web\" target=\"_blank\">《F2etest-web 架构》</a></li></ul><p><br /></p><h3 id=\"459d680c\">2.2 浏览器云</h3><p><br /></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F182712%2F1554716548925-e18c5310-2978-4549-a0e8-1b23b01fe0b3.png%22%2C%22originWidth%22%3A878%2C%22originHeight%22%3A494%2C%22name%22%3A%22image.png%22%2C%22size%22%3A339228%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A878%2C%22height%22%3A494%7D\"></card><br /></p><p><br /></p><p>浏览器云的理念主要是“打开即用”，基于多浏览兼容测试环境搭建的痛点，我们在一批 Windows Server 集群上分别安装了不同版本的浏览器，通过远程桌面协议的方式集成至 F2etest 平台。这样，所有用户都可以 F2etest 平台直接使用不同类型的浏览器，极大降低了用户搭建和维护测试环境的成本。</p><p>具体实现原理请参考<a href=\"https://www.yuque.com/artist/f2etest/browser-cloud\" target=\"_blank\">《浏览器云架构》</a></p><p><br /></p><h3 id=\"20613dfe\">2.3 WebDriver 云</h3><p><br /></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F182712%2F1554715508862-3dd44041-2ff7-4118-8fb9-a9174abd5ff6.png%22%2C%22originWidth%22%3A1462%2C%22originHeight%22%3A721%2C%22size%22%3A0%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A368%7D\"></card></p><p><br /></p><p>WebDriver 利用浏览器原生的 API，封装了一层 WebDriver API，可以直接操作浏览器页面的 DOM 节点元素，甚至操作浏览器本身（截屏，窗口大小，启动，关闭，安装插件，配置证书之类的）。WebDriver 云则是基于 WebDriver 实现的一套 WebDriver Hub 解决方案，提供并调度执行自动化测试的工作节点。</p><p>具体实现原理请参考 <a href=\"https://www.yuque.com/artist/f2etest/webdriver-cloud\" target=\"_blank\">《WebDriver 云实现原理》</a>。</p><p><cursor /><br /></p>","public":1,"status":null,"likes_count":4,"comments_count":0,"content_updated_at":"2019-04-16T16:39:44.000Z","deleted_at":null,"created_at":"2019-04-08T09:24:37.000Z","updated_at":"2019-04-23T06:14:53.000Z","published_at":"2019-04-16T16:39:44.000Z","first_published_at":"2019-04-08T09:25:48.000Z","word_count":604,"cover":null,"description":"一、名词释义浏览器云： 提供真实的多浏览器兼容性环境，还原真实测试场景。WebDriver：https://w3c.github.io/webdriver/，WebDriver 是一个远程控制接口，可以对用户代理进行内省和控制。它提供了一种平台和语言中立的 wire protocol，来作为进...","custom_description":null,"_serializer":"v2.doc_detail"}