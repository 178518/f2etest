{"id":1486777,"slug":"webdriver-cloud-install","title":"WebDriver 云的安装部署","book_id":245753,"book":{"id":245753,"type":"Book","slug":"f2etest","name":"F2etest","user_id":296279,"description":"F2etest 是一个面向前端、测试、产品等岗位的多浏览器兼容性测试整体解决方案。","creator_id":94302,"public":1,"items_count":12,"likes_count":0,"watches_count":2,"content_updated_at":"2019-04-23T05:44:30.303Z","updated_at":"2019-04-23T06:32:14.000Z","created_at":"2019-03-21T03:15:48.000Z","namespace":"linshuoting/f2etest","user":{"id":94302,"type":"User","login":"linshuoting","name":"说听(Stngle)","description":"F&D艺术家   \nhttps://github.com/Stngle","avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/94302/1553150368242-avatar/4fa5a6cc-1636-43cd-b085-fce8ad30be09.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":1,"public_books_count":0,"followers_count":3,"following_count":2,"created_at":"2018-03-21T12:59:06.000Z","updated_at":"2019-04-23T05:43:09.000Z","_serializer":"v2.user"},"_serializer":"v2.book"},"user_id":182712,"creator":{"id":182712,"type":"User","login":"undead25","name":"双龙","description":null,"avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png","large_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_320,h_320","medium_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_160,h_160","small_avatar_url":"https://cdn.nlark.com/yuque/0/2019/png/182712/1554346835965-avatar/a9f57da4-3a12-43bc-be2c-85b7e215b7c7.png?x-oss-process=image/resize,m_fill,w_80,h_80","books_count":0,"public_books_count":0,"followers_count":0,"following_count":1,"created_at":"2018-09-26T16:45:26.000Z","updated_at":"2019-04-04T03:00:41.000Z","_serializer":"v2.user"},"format":"lake","body":"","body_draft":"","body_html":"<h1 id=\"cafb404e\">一、安装运行</h1><p>本文以Windows Server 2008系统配置为例，后续会出基于WinServer 2016版本的docker镜像</p><h3 id=\"8eb6c870\">1.1 安装并配置远程桌面服务</h3><ul><li>增加角色</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187708-bd8d9fe7-3b9a-481c-98f4-5a69ecf4fdfc.png#align=left&amp;display=inline&amp;height=858&amp;name=image.png&amp;originHeight=1716&amp;originWidth=2880&amp;size=381151&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>选择远程桌面服务</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187691-46402cf6-1cf1-42a5-afd2-7c383c0460a2.png#align=left&amp;display=inline&amp;height=857&amp;name=image.png&amp;originHeight=1714&amp;originWidth=2880&amp;size=487041&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>勾选远程桌面会话主机、远程桌面授权、远程桌面Web访问</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187691-9677110c-8e53-441e-bd69-2c01e939c6a7.png#align=left&amp;display=inline&amp;height=854&amp;name=image.png&amp;originHeight=1708&amp;originWidth=2880&amp;size=475112&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>选择不适用网络级别身份验证</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187710-8e9f1df0-ba91-4c7a-8bb5-062238738b3f.png#align=left&amp;display=inline&amp;height=855&amp;name=image.png&amp;originHeight=1710&amp;originWidth=2876&amp;size=518693&amp;status=done&amp;width=1438\" style=\"max-width: 600px; width: 1438px;\" /></p><p><br /></p><ul><li>授权模式选择按用户</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187717-f58a5049-c6fe-4d98-a3c5-4ae1ed7c9e16.png#align=left&amp;display=inline&amp;height=854&amp;name=image.png&amp;originHeight=1708&amp;originWidth=2880&amp;size=487534&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>选择用户组</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187726-eba87859-2ce3-45c2-9902-1122b8a6b962.png#align=left&amp;display=inline&amp;height=856&amp;name=image.png&amp;originHeight=1712&amp;originWidth=2880&amp;size=485506&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187715-7bc983ef-7f3e-44c1-a252-fc2d2edbccf5.png#align=left&amp;display=inline&amp;height=856&amp;name=image.png&amp;originHeight=1712&amp;originWidth=2880&amp;size=452726&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>客户端体验(默认，点Next)</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187733-32b53f9b-8eec-4796-aa33-75f856c8d951.png#align=left&amp;display=inline&amp;height=859&amp;name=image.png&amp;originHeight=1718&amp;originWidth=2880&amp;size=500387&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>RD授权模式（默认，Next）</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187741-086d79f7-aa09-4040-9713-8a2e254813f7.png#align=left&amp;display=inline&amp;height=858&amp;name=image.png&amp;originHeight=1716&amp;originWidth=2880&amp;size=525160&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>勾选(IIS - ASP)</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187726-9bc781c9-ca1a-4d8b-be34-729980af3a61.png#align=left&amp;display=inline&amp;height=857&amp;name=image.png&amp;originHeight=1714&amp;originWidth=2876&amp;size=516861&amp;status=done&amp;width=1438\" style=\"max-width: 600px; width: 1438px;\" /></p><p><br /></p><ul><li>开始安装</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187751-fe48b49e-b7ba-4f41-a0db-ef4ed2b8cd27.png#align=left&amp;display=inline&amp;height=856&amp;name=image.png&amp;originHeight=1712&amp;originWidth=2880&amp;size=526102&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>重启服务器</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187753-ef73e3dc-bf5e-4ac4-899d-4cfec0fddb3a.png#align=left&amp;display=inline&amp;height=855&amp;name=image.png&amp;originHeight=1710&amp;originWidth=2880&amp;size=496827&amp;status=done&amp;width=1440\" style=\"max-width: 600px; width: 1440px;\" /></p><p><br /></p><ul><li>激活授权服务器</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187757-9727cac1-9dd2-42ff-9e17-aa05d5abbbb6.png#align=left&amp;display=inline&amp;height=644&amp;name=image.png&amp;originHeight=1288&amp;originWidth=1626&amp;size=277559&amp;status=done&amp;width=813\" style=\"max-width: 600px; width: 813px;\" /></p><p><br /></p><ul><li>右键 -&gt; 激活服务</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187755-b8ec1d61-4108-4f20-bd23-6cae1b3259ef.png#align=left&amp;display=inline&amp;height=625&amp;name=image.png&amp;originHeight=1250&amp;originWidth=2160&amp;size=123878&amp;status=done&amp;width=1080\" style=\"max-width: 600px; width: 1080px;\" /></p><p><br /></p><ul><li>选择自动连接</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187756-88e34d23-e4c1-4de1-8c8d-c1aa2681120e.png#align=left&amp;display=inline&amp;height=624&amp;name=image.png&amp;originHeight=1248&amp;originWidth=2154&amp;size=165128&amp;status=done&amp;width=1077\" style=\"max-width: 600px; width: 1077px;\" /></p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187770-ed119f36-e2b9-4a53-b5a4-e853182fd29e.png#align=left&amp;display=inline&amp;height=622&amp;name=image.png&amp;originHeight=1244&amp;originWidth=2156&amp;size=167466&amp;status=done&amp;width=1078\" style=\"max-width: 600px; width: 1078px;\" /></p><p><br /></p><ul><li>开始激活引导</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187766-f343ca3f-2c61-4674-9e76-79d5aeef6e76.png#align=left&amp;display=inline&amp;height=622&amp;name=image.png&amp;originHeight=1244&amp;originWidth=2156&amp;size=263126&amp;status=done&amp;width=1078\" style=\"max-width: 600px; width: 1078px;\" /></p><p><br /></p><ul><li>选择企业协议</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187773-e10d626e-01ba-4363-9869-9255527e4bd6.png#align=left&amp;display=inline&amp;height=625&amp;name=image.png&amp;originHeight=1250&amp;originWidth=2162&amp;size=167547&amp;status=done&amp;width=1081\" style=\"max-width: 600px; width: 1081px;\" /></p><p>填写协议号码</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187773-16e08e7a-3fe1-4151-b0ee-a1410113cc96.png#align=left&amp;display=inline&amp;height=625&amp;name=image.png&amp;originHeight=1250&amp;originWidth=2154&amp;size=129118&amp;status=done&amp;width=1077\" style=\"max-width: 600px; width: 1077px;\" /></p><p><br /></p><ul><li>许可证用户选择按用户</li></ul><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187778-524937df-e2bf-44a1-ae7b-4536f85299bd.png#align=left&amp;display=inline&amp;height=624&amp;name=image.png&amp;originHeight=1248&amp;originWidth=2158&amp;size=180832&amp;status=done&amp;width=1079\" style=\"max-width: 600px; width: 1079px;\" /></p><p><br /></p><ul><li>激活完成</li></ul><p><strong><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187783-8f88c7b3-e53d-496a-b81d-7eb83ebc9519.png#align=left&amp;display=inline&amp;height=627&amp;name=image.png&amp;originHeight=1254&amp;originWidth=2154&amp;size=243829&amp;status=done&amp;width=1077\" style=\"max-width: 600px; width: 1077px;\" /></strong></p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187796-64c6e09d-c469-4cba-af14-ef961bff36a3.png#align=left&amp;display=inline&amp;height=623&amp;name=image.png&amp;originHeight=1246&amp;originWidth=2154&amp;size=105918&amp;status=done&amp;width=1077\" style=\"max-width: 600px; width: 1077px;\" /></p><h3 id=\"9971dbcf\">1.2 安装NodeJs</h3><p>安装请访问官网：<a href=\"https://nodejs.org/\" target=\"_blank\"><span>https://nodejs.org</span></a>，如果已安装好，请略过</p><p><strong>为了稳定，建议安装LTS版本</strong></p><p><strong><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187796-10c3b607-349e-430c-9ef1-b3a1b27e2c81.png#align=left&amp;display=inline&amp;height=192&amp;name=image.png&amp;originHeight=384&amp;originWidth=500&amp;size=23426&amp;status=done&amp;width=250\" style=\"max-width: 600px; width: 250px;\" /></strong></p><h3 id=\"d41d8cd9\"><br /></h3><h3 id=\"3c733ab0\">1.3 安装Java</h3><p> 安装请访问官网：<a href=\"https://java.com/zh_CN/download/\" target=\"_blank\"><span>https://java.com/zh_CN/download/</span></a></p><p> 用于运行WebDriver Server(Selenium2)</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187809-cf5ff82e-1e8e-4919-b104-5d060737d887.png#align=left&amp;display=inline&amp;height=192&amp;name=image.png&amp;originHeight=383&amp;originWidth=706&amp;size=29156&amp;status=done&amp;width=353\" style=\"max-width: 600px; width: 353px;\" /></p><h3 id=\"d41d8cd9-1\"><br /></h3><h3 id=\"1a4291e4\">1.4 下载f2etest-webdriver</h3><p>下载并拷贝 <a href=\"https://github.com/alibaba/f2etest/tree/master/f2etest-client/f2etest-webdriver\" target=\"_blank\">https://github.com/alibaba/f2etest/tree/master/f2etest-client/f2etest-webdriver</a>，放到C盘更目录下C:\\f2etest-webdriver</p><h3 id=\"d41d8cd9-2\"><br /></h3><h3 id=\"8bda3f3c\">1.5 初始化子节点账号数据</h3><p>1<span>. 命令行输入：`gpedit.msc`，</span>关闭密码复杂性要求</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187802-1e1257d1-37dc-4335-9f15-4fbb7386dda2.png#align=left&amp;display=inline&amp;height=621&amp;name=image.png&amp;originHeight=1242&amp;originWidth=1874&amp;size=232297&amp;status=done&amp;width=937\" style=\"max-width: 600px; width: 937px;\" /></p><p><br /></p><p>2<span>. </span>双击`批量设置节点用户.vbs`文件，输入需要初始化的节点数量，例如：8</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187811-ba10022f-b826-4e1b-bd46-77c3dd940f21.png#align=left&amp;display=inline&amp;height=492&amp;name=image.png&amp;originHeight=984&amp;originWidth=1718&amp;size=147123&amp;status=done&amp;width=859\" style=\"max-width: 600px; width: 859px;\" /></p><p><br /></p><p>3. 在本地用户和组中可看到已经初始化好的8个节点用户</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187815-6e9f081b-806c-4224-8eff-087f2f9a71e3.png#align=left&amp;display=inline&amp;height=738&amp;name=image.png&amp;originHeight=1476&amp;originWidth=2040&amp;size=200197&amp;status=done&amp;width=1020\" style=\"max-width: 600px; width: 1020px;\" /></p><p>4. 删除多页的节点rdp文件，只保留8个，与节点用户保持一致</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187827-65a236a1-73b1-4fec-9c37-5cf05c109b93.png#align=left&amp;display=inline&amp;height=181&amp;name=image.png&amp;originHeight=362&amp;originWidth=637&amp;size=48324&amp;status=done&amp;width=319\" style=\"max-width: 600px; width: 319px;\" /></p><p><br /></p><h3 id=\"ba609199\">1.6 初始化环境变量</h3><p>将`C:\\f2etest-webdriver\\webdriver\\`文件夹添加到PATH环境变量中</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187824-604d0c99-58a7-4993-b750-570124f17c0f.png#align=left&amp;display=inline&amp;height=600&amp;name=image.png&amp;originHeight=1200&amp;originWidth=2020&amp;size=252051&amp;status=done&amp;width=1010\" style=\"max-width: 600px; width: 1010px;\" /></p><p><br /></p><h3 id=\"90f916c3\">1.7 关闭IE增强配置</h3><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187827-c958321f-c678-4e22-9ad1-f1dc6a2ad5dc.png#align=left&amp;display=inline&amp;height=478&amp;name=image.png&amp;originHeight=730&amp;originWidth=1140&amp;size=88584&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187863-bd249556-5c42-4aa1-af53-67a0d7be8f21.png#align=left&amp;display=inline&amp;height=497&amp;name=image.png&amp;originHeight=599&amp;originWidth=899&amp;size=117771&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><h3 id=\"d41d8cd9-3\"><br /></h3><h3 id=\"dc00dd3e\">1.8 安装Chrome</h3><p>这里有个点要注意的是Chrome版本要与Chrome Webdriver的版本对上，如Chrome 73 要对应Chrome WebDriver 73</p><p>附：webdriver下载链接<a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" target=\"_blank\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a></p><h3 id=\"d41d8cd9-4\"><br /></h3><h3 id=\"557d2443\">1.9 禁用防火墙</h3><p style=\"text-indent: 2em;\">防止WebDriver命令无法转发至本机</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187844-bd72236c-70ae-49f0-8c81-786cadaa9aff.png#align=left&amp;display=inline&amp;height=598&amp;name=image.png&amp;originHeight=1196&amp;originWidth=1794&amp;size=165936&amp;status=done&amp;width=897\" style=\"max-width: 600px; width: 897px;\" /></p><p><br /></p><h3 id=\"7f2b1e2f\">1.10 设置服务器每天定时重启</h3><p><span>1. </span>添加计划任务</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187851-8f471e5a-6ff8-4b6e-84a1-afe739cfae61.png#align=left&amp;display=inline&amp;height=734&amp;name=image.png&amp;originHeight=1468&amp;originWidth=2296&amp;size=442859&amp;status=done&amp;width=1148\" style=\"max-width: 600px; width: 1148px;\" /></p><p>2. 命令输入：shutdown /f /r /t 30</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187857-d5316020-174f-4185-a3b3-e8c640583a5d.png#align=left&amp;display=inline&amp;height=733&amp;name=image.png&amp;originHeight=1466&amp;originWidth=2290&amp;size=391090&amp;status=done&amp;width=1145\" style=\"max-width: 600px; width: 1145px;\" /></p><p>3. 时间建议选择在凌晨5点左右</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187884-92edda92-1704-4b18-8552-4d4c2e0cd1a8.png#align=left&amp;display=inline&amp;height=734&amp;name=image.png&amp;originHeight=1468&amp;originWidth=2284&amp;size=458663&amp;status=done&amp;width=1142\" style=\"max-width: 600px; width: 1142px;\" /></p><p>4. 创建完成</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187893-5771fc57-510f-411f-a8db-43042e76a612.png#align=left&amp;display=inline&amp;height=249&amp;name=image.png&amp;originHeight=498&amp;originWidth=1354&amp;size=38807&amp;status=done&amp;width=677\" style=\"max-width: 600px; width: 677px;\" /></p><p><span style=\"background-color: transparent;\">1.11 初始化webdriver节点</span><br /></p><p>1. 执行`RDP.exe`</p><p>2. password处输入：`hello1234`</p><p>3. 点击`Encrypt按钮`</p><p>4. 复制出加密后的Hash</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187902-3192db8a-bf9c-4443-a945-a2342a5396c9.png#align=left&amp;display=inline&amp;height=138&amp;name=image.png&amp;originHeight=276&amp;originWidth=679&amp;size=32760&amp;status=done&amp;width=340\" style=\"max-width: 600px; width: 340px;\" /></p><p><span style=\"background-color: #D9D9D9;\">注：由于不同系统生成的Hash不同，因此，这个值需要在每台执行机上进行动态生成并替换</span></p><p><br /></p><p>5. 替换当前子文件夹中所有rdp扩展名的文件，替换password_hash为刚才复制的加密后Hash</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187908-4dda5d23-1be8-40d3-a92d-c61f98105993.png#align=left&amp;display=inline&amp;height=667&amp;name=image.png&amp;originHeight=1334&amp;originWidth=1504&amp;size=159457&amp;status=done&amp;width=752\" style=\"max-width: 600px; width: 752px;\" /></p><p><br /></p><p>6. 修改`webdriver/opennode.bat`</p><ol start=\"1\"><li>修改f2etestHost变量为f2etest服务部署的IP地址或域名</li><li>browsers变量修改为本机所部署的浏览器名称，多个浏览器以逗号间隔，浏览器名称和浏览器版本号之间以空格间隔，例如: IE 11,Chrome,Firefox</li></ol><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187915-2a880c53-a291-428b-8736-56b02458eee6.png#align=left&amp;display=inline&amp;height=306&amp;name=image.png&amp;originHeight=611&amp;originWidth=1026&amp;size=55565&amp;status=done&amp;width=513\" style=\"max-width: 600px; width: 513px;\" /></p><p><br /></p><h3 id=\"ee330611\">1.12 启动节点</h3><ol start=\"1\"><li>执行<code>rdp\\openAllNode.bat</code>，然后打开一次所有的IE浏览器，进行首次初始化，同时启用所有安全区域的保护模式</li></ol><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187963-4742b558-4780-4ed1-9547-807980725afc.png#align=left&amp;display=inline&amp;height=745&amp;name=image.png&amp;originHeight=1490&amp;originWidth=2702&amp;size=298751&amp;status=done&amp;width=1351\" style=\"max-width: 600px; width: 1351px;\" /></p><ol start=\"2\"><li>第1步完成后，执行<code>rdp\\initAllNodes.bat</code>，批量添加启动批处理</li></ol><p><br /></p><ol start=\"3\"><li>所有节点初始化完成后，将<code>rdp\\openAllNode.bat</code>添加快捷方式到Administrator账号的系统自动启动文件夹，以实现开机自动打开所有的WebDriver节点</li></ol><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187924-d3059296-996b-4a12-a630-5365e1ef2b54.png#align=left&amp;display=inline&amp;height=136&amp;name=image.png&amp;originHeight=271&amp;originWidth=250&amp;size=19733&amp;status=done&amp;width=125\" style=\"max-width: 600px; width: 125px;\" /></p><p><br /></p><ol start=\"4\"><li>命令行输入：<code>netplwiz</code>，在高级用户控制面板中，取消对<code>“要使用本机，用户需输入用户名和密码(E)”</code>项的勾选。系统将弹出窗口要求输入默认登录系统的用户名和密码，输入完成后点击确定</li></ol><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187927-54143e99-2523-4085-991a-4de65ce1c0af.png#align=left&amp;display=inline&amp;height=252&amp;name=image.png&amp;originHeight=503&amp;originWidth=467&amp;size=41419&amp;status=done&amp;width=234\" style=\"max-width: 600px; width: 234px;\" /></p><ol start=\"5\"><li style=\"padding-left: 22px;\">重启操作系统，如果正常的话，所有节点在3分钟左右之后应该会自动启动</li></ol><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187934-0efa9554-99c6-4067-ab66-a5b12ab2815d.png#align=left&amp;display=inline&amp;height=166&amp;name=image.png&amp;originHeight=331&amp;originWidth=666&amp;size=16816&amp;status=done&amp;width=333\" style=\"max-width: 600px; width: 333px;\" /></p><p><br /></p><p>6.关闭保护模式（需要到每个节点的远程桌面中关闭）</p><p>IE浏览器 -&gt; Ineternet选项，安全，对应4个Tab都需要关闭保护模式，否则报“Unexpected error launching Internet Explorer. Protected Mode settings are not the same for all zones”的错误</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998187942-1d52b0c3-33f9-45ed-ad3a-a2d2bed7f4ff.png#align=left&amp;display=inline&amp;height=497&amp;name=image.png&amp;originHeight=599&amp;originWidth=899&amp;size=117771&amp;status=done&amp;width=746\" style=\"max-width: 600px; width: 746px;\" /></p><h2 id=\"a16df528\">二、节点测试与验证</h2><p>使用UIRecorder 示例项目 来进行WebDriver的验证</p><h4 id=\"052d8f63\">2.1 执行UIRecorder测试脚本</h4><p>配置config.json</p><pre data-lang=\"json\"><code>{\n    &quot;webdriver&quot;: {\n        &quot;host&quot;: &quot;你的webdriver节点IP&quot;,\n        &quot;port&quot;: &quot;4001&quot;,\n        &quot;browsers&quot;: &quot;ie11, chrome&quot;\n    }\n }</code></pre><p>端口是4001对应node01, 以此类推4008对应node08</p><p><br /></p><p>运行测试脚本 source run.sh sample/test.spec.js</p><p><img alt=\"image.png\" title=\"image.png\" src=\"https://cdn.nlark.com/yuque/0/2019/png/292665/1555998188000-669e018a-86e9-434d-9ea4-f2a0c72ae21f.png#align=left&amp;display=inline&amp;height=368&amp;name=image.png&amp;originHeight=368&amp;originWidth=545&amp;size=48287&amp;status=done&amp;width=545\" style=\"max-width: 600px; width: 545px;\" /></p><p>验证通过</p><p><br /></p>","body_lake":"<!doctype lake><h1 id=\"cafb404e\">一、安装运行</h1><p>本文以Windows Server 2008系统配置为例，后续会出基于WinServer 2016版本的docker镜像</p><h3 id=\"8eb6c870\">1.1 安装并配置远程桌面服务</h3><ul><li>增加角色</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187708-bd8d9fe7-3b9a-481c-98f4-5a69ecf4fdfc.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1716%2C%22name%22%3A%22image.png%22%2C%22size%22%3A381151%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A858%7D\"></card></p><p><br /></p><ul><li>选择远程桌面服务</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187691-46402cf6-1cf1-42a5-afd2-7c383c0460a2.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1714%2C%22name%22%3A%22image.png%22%2C%22size%22%3A487041%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A857%7D\"></card></p><p><br /></p><ul><li>勾选远程桌面会话主机、远程桌面授权、远程桌面Web访问</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187691-9677110c-8e53-441e-bd69-2c01e939c6a7.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1708%2C%22name%22%3A%22image.png%22%2C%22size%22%3A475112%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A854%7D\"></card></p><p><br /></p><ul><li>选择不适用网络级别身份验证</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187710-8e9f1df0-ba91-4c7a-8bb5-062238738b3f.png%22%2C%22originWidth%22%3A2876%2C%22originHeight%22%3A1710%2C%22name%22%3A%22image.png%22%2C%22size%22%3A518693%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1438%2C%22height%22%3A855%7D\"></card></p><p><br /></p><ul><li>授权模式选择按用户</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187717-f58a5049-c6fe-4d98-a3c5-4ae1ed7c9e16.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1708%2C%22name%22%3A%22image.png%22%2C%22size%22%3A487534%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A854%7D\"></card></p><p><br /></p><ul><li>选择用户组</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187726-eba87859-2ce3-45c2-9902-1122b8a6b962.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1712%2C%22name%22%3A%22image.png%22%2C%22size%22%3A485506%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A856%7D\"></card></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187715-7bc983ef-7f3e-44c1-a252-fc2d2edbccf5.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1712%2C%22name%22%3A%22image.png%22%2C%22size%22%3A452726%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A856%7D\"></card></p><p><br /></p><ul><li>客户端体验(默认，点Next)</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187733-32b53f9b-8eec-4796-aa33-75f856c8d951.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1718%2C%22name%22%3A%22image.png%22%2C%22size%22%3A500387%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A859%7D\"></card></p><p><br /></p><ul><li>RD授权模式（默认，Next）</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187741-086d79f7-aa09-4040-9713-8a2e254813f7.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1716%2C%22name%22%3A%22image.png%22%2C%22size%22%3A525160%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A858%7D\"></card></p><p><br /></p><ul><li>勾选(IIS - ASP)</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187726-9bc781c9-ca1a-4d8b-be34-729980af3a61.png%22%2C%22originWidth%22%3A2876%2C%22originHeight%22%3A1714%2C%22name%22%3A%22image.png%22%2C%22size%22%3A516861%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1438%2C%22height%22%3A857%7D\"></card></p><p><br /></p><ul><li>开始安装</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187751-fe48b49e-b7ba-4f41-a0db-ef4ed2b8cd27.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1712%2C%22name%22%3A%22image.png%22%2C%22size%22%3A526102%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A856%7D\"></card></p><p><br /></p><ul><li>重启服务器</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187753-ef73e3dc-bf5e-4ac4-899d-4cfec0fddb3a.png%22%2C%22originWidth%22%3A2880%2C%22originHeight%22%3A1710%2C%22name%22%3A%22image.png%22%2C%22size%22%3A496827%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1440%2C%22height%22%3A855%7D\"></card></p><p><br /></p><ul><li>激活授权服务器</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187757-9727cac1-9dd2-42ff-9e17-aa05d5abbbb6.png%22%2C%22originWidth%22%3A1626%2C%22originHeight%22%3A1288%2C%22name%22%3A%22image.png%22%2C%22size%22%3A277559%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A813%2C%22height%22%3A644%7D\"></card></p><p><br /></p><ul><li>右键 -&gt; 激活服务</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187755-b8ec1d61-4108-4f20-bd23-6cae1b3259ef.png%22%2C%22originWidth%22%3A2160%2C%22originHeight%22%3A1250%2C%22name%22%3A%22image.png%22%2C%22size%22%3A123878%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1080%2C%22height%22%3A625%7D\"></card></p><p><br /></p><ul><li>选择自动连接</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187756-88e34d23-e4c1-4de1-8c8d-c1aa2681120e.png%22%2C%22originWidth%22%3A2154%2C%22originHeight%22%3A1248%2C%22name%22%3A%22image.png%22%2C%22size%22%3A165128%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1077%2C%22height%22%3A624%7D\"></card></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187770-ed119f36-e2b9-4a53-b5a4-e853182fd29e.png%22%2C%22originWidth%22%3A2156%2C%22originHeight%22%3A1244%2C%22name%22%3A%22image.png%22%2C%22size%22%3A167466%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1078%2C%22height%22%3A622%7D\"></card></p><p><br /></p><ul><li>开始激活引导</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187766-f343ca3f-2c61-4674-9e76-79d5aeef6e76.png%22%2C%22originWidth%22%3A2156%2C%22originHeight%22%3A1244%2C%22name%22%3A%22image.png%22%2C%22size%22%3A263126%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1078%2C%22height%22%3A622%7D\"></card></p><p><br /></p><ul><li>选择企业协议</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187773-e10d626e-01ba-4363-9869-9255527e4bd6.png%22%2C%22originWidth%22%3A2162%2C%22originHeight%22%3A1250%2C%22name%22%3A%22image.png%22%2C%22size%22%3A167547%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1081%2C%22height%22%3A625%7D\"></card></p><p>填写协议号码</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187773-16e08e7a-3fe1-4151-b0ee-a1410113cc96.png%22%2C%22originWidth%22%3A2154%2C%22originHeight%22%3A1250%2C%22name%22%3A%22image.png%22%2C%22size%22%3A129118%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1077%2C%22height%22%3A625%7D\"></card></p><p><br /></p><ul><li>许可证用户选择按用户</li></ul><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187778-524937df-e2bf-44a1-ae7b-4536f85299bd.png%22%2C%22originWidth%22%3A2158%2C%22originHeight%22%3A1248%2C%22name%22%3A%22image.png%22%2C%22size%22%3A180832%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1079%2C%22height%22%3A624%7D\"></card></p><p><br /></p><ul><li>激活完成</li></ul><p><strong><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187783-8f88c7b3-e53d-496a-b81d-7eb83ebc9519.png%22%2C%22originWidth%22%3A2154%2C%22originHeight%22%3A1254%2C%22name%22%3A%22image.png%22%2C%22size%22%3A243829%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1077%2C%22height%22%3A627%7D\"></card></strong></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187796-64c6e09d-c469-4cba-af14-ef961bff36a3.png%22%2C%22originWidth%22%3A2154%2C%22originHeight%22%3A1246%2C%22name%22%3A%22image.png%22%2C%22size%22%3A105918%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1077%2C%22height%22%3A623%7D\"></card></p><h3 id=\"9971dbcf\">1.2 安装NodeJs</h3><p>安装请访问官网：<a href=\"https://nodejs.org/\" target=\"_blank\"><span>https://nodejs.org</span></a>，如果已安装好，请略过</p><p><strong>为了稳定，建议安装LTS版本</strong></p><p><strong><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187796-10c3b607-349e-430c-9ef1-b3a1b27e2c81.png%22%2C%22originWidth%22%3A500%2C%22originHeight%22%3A384%2C%22name%22%3A%22image.png%22%2C%22size%22%3A23426%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A250%2C%22height%22%3A192%7D\"></card></strong></p><h3 id=\"d41d8cd9\"><br /></h3><h3 id=\"3c733ab0\">1.3 安装Java</h3><p> 安装请访问官网：<a href=\"https://java.com/zh_CN/download/\" target=\"_blank\"><span>https://java.com/zh_CN/download/</span></a></p><p> 用于运行WebDriver Server(Selenium2)</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187809-cf5ff82e-1e8e-4919-b104-5d060737d887.png%22%2C%22originWidth%22%3A706%2C%22originHeight%22%3A383%2C%22name%22%3A%22image.png%22%2C%22size%22%3A29156%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A353%2C%22height%22%3A192%7D\"></card></p><h3 id=\"d41d8cd9-1\"><br /></h3><h3 id=\"1a4291e4\">1.4 下载f2etest-webdriver</h3><p>下载并拷贝 <a href=\"https://github.com/alibaba/f2etest/tree/master/f2etest-client/f2etest-webdriver\" target=\"_blank\">https://github.com/alibaba/f2etest/tree/master/f2etest-client/f2etest-webdriver</a>，放到C盘更目录下C:\\f2etest-webdriver</p><h3 id=\"d41d8cd9-2\"><br /></h3><h3 id=\"8bda3f3c\">1.5 初始化子节点账号数据</h3><p>1<span>. 命令行输入：`gpedit.msc`，</span>关闭密码复杂性要求</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187802-1e1257d1-37dc-4335-9f15-4fbb7386dda2.png%22%2C%22originWidth%22%3A1874%2C%22originHeight%22%3A1242%2C%22name%22%3A%22image.png%22%2C%22size%22%3A232297%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A937%2C%22height%22%3A621%7D\"></card></p><p><br /></p><p>2<span>. </span>双击`批量设置节点用户.vbs`文件，输入需要初始化的节点数量，例如：8</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187811-ba10022f-b826-4e1b-bd46-77c3dd940f21.png%22%2C%22originWidth%22%3A1718%2C%22originHeight%22%3A984%2C%22name%22%3A%22image.png%22%2C%22size%22%3A147123%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A859%2C%22height%22%3A492%7D\"></card></p><p><br /></p><p>3. 在本地用户和组中可看到已经初始化好的8个节点用户</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187815-6e9f081b-806c-4224-8eff-087f2f9a71e3.png%22%2C%22originWidth%22%3A2040%2C%22originHeight%22%3A1476%2C%22name%22%3A%22image.png%22%2C%22size%22%3A200197%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1020%2C%22height%22%3A738%7D\"></card></p><p>4. 删除多页的节点rdp文件，只保留8个，与节点用户保持一致</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187827-65a236a1-73b1-4fec-9c37-5cf05c109b93.png%22%2C%22originWidth%22%3A637%2C%22originHeight%22%3A362%2C%22name%22%3A%22image.png%22%2C%22size%22%3A48324%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A319%2C%22height%22%3A181%7D\"></card></p><p><br /></p><h3 id=\"ba609199\">1.6 初始化环境变量</h3><p>将`C:\\f2etest-webdriver\\webdriver\\`文件夹添加到PATH环境变量中</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187824-604d0c99-58a7-4993-b750-570124f17c0f.png%22%2C%22originWidth%22%3A2020%2C%22originHeight%22%3A1200%2C%22name%22%3A%22image.png%22%2C%22size%22%3A252051%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1010%2C%22height%22%3A600%7D\"></card></p><p><br /></p><h3 id=\"90f916c3\">1.7 关闭IE增强配置</h3><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187827-c958321f-c678-4e22-9ad1-f1dc6a2ad5dc.png%22%2C%22originWidth%22%3A1140%2C%22originHeight%22%3A730%2C%22name%22%3A%22image.png%22%2C%22size%22%3A88584%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A478%7D\"></card></p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187863-bd249556-5c42-4aa1-af53-67a0d7be8f21.png%22%2C%22originWidth%22%3A899%2C%22originHeight%22%3A599%2C%22name%22%3A%22image.png%22%2C%22size%22%3A117771%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A497%7D\"></card></p><h3 id=\"d41d8cd9-3\"><br /></h3><h3 id=\"dc00dd3e\">1.8 安装Chrome</h3><p>这里有个点要注意的是Chrome版本要与Chrome Webdriver的版本对上，如Chrome 73 要对应Chrome WebDriver 73</p><p>附：webdriver下载链接<a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" target=\"_blank\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a></p><h3 id=\"d41d8cd9-4\"><br /></h3><h3 id=\"557d2443\">1.9 禁用防火墙</h3><p style=\"text-indent: 2em;\">防止WebDriver命令无法转发至本机</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187844-bd72236c-70ae-49f0-8c81-786cadaa9aff.png%22%2C%22originWidth%22%3A1794%2C%22originHeight%22%3A1196%2C%22name%22%3A%22image.png%22%2C%22size%22%3A165936%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A897%2C%22height%22%3A598%7D\"></card></p><p><br /></p><h3 id=\"7f2b1e2f\">1.10 设置服务器每天定时重启</h3><p><span>1. </span>添加计划任务</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187851-8f471e5a-6ff8-4b6e-84a1-afe739cfae61.png%22%2C%22originWidth%22%3A2296%2C%22originHeight%22%3A1468%2C%22name%22%3A%22image.png%22%2C%22size%22%3A442859%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1148%2C%22height%22%3A734%7D\"></card></p><p>2. 命令输入：shutdown /f /r /t 30</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187857-d5316020-174f-4185-a3b3-e8c640583a5d.png%22%2C%22originWidth%22%3A2290%2C%22originHeight%22%3A1466%2C%22name%22%3A%22image.png%22%2C%22size%22%3A391090%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1145%2C%22height%22%3A733%7D\"></card></p><p>3. 时间建议选择在凌晨5点左右</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187884-92edda92-1704-4b18-8552-4d4c2e0cd1a8.png%22%2C%22originWidth%22%3A2284%2C%22originHeight%22%3A1468%2C%22name%22%3A%22image.png%22%2C%22size%22%3A458663%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1142%2C%22height%22%3A734%7D\"></card></p><p>4. 创建完成</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187893-5771fc57-510f-411f-a8db-43042e76a612.png%22%2C%22originWidth%22%3A1354%2C%22originHeight%22%3A498%2C%22name%22%3A%22image.png%22%2C%22size%22%3A38807%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A677%2C%22height%22%3A249%7D\"></card></p><p><span style=\"background-color: transparent;\">1.11 初始化webdriver节点</span><br /></p><p>1. 执行`RDP.exe`</p><p>2. password处输入：`hello1234`</p><p>3. 点击`Encrypt按钮`</p><p>4. 复制出加密后的Hash</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187902-3192db8a-bf9c-4443-a945-a2342a5396c9.png%22%2C%22originWidth%22%3A679%2C%22originHeight%22%3A276%2C%22name%22%3A%22image.png%22%2C%22size%22%3A32760%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A340%2C%22height%22%3A138%7D\"></card></p><p><span style=\"background-color: #D9D9D9;\">注：由于不同系统生成的Hash不同，因此，这个值需要在每台执行机上进行动态生成并替换</span></p><p><br /></p><p>5. 替换当前子文件夹中所有rdp扩展名的文件，替换password_hash为刚才复制的加密后Hash</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187908-4dda5d23-1be8-40d3-a92d-c61f98105993.png%22%2C%22originWidth%22%3A1504%2C%22originHeight%22%3A1334%2C%22name%22%3A%22image.png%22%2C%22size%22%3A159457%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A752%2C%22height%22%3A667%7D\"></card></p><p><br /></p><p>6. 修改`webdriver/opennode.bat`</p><ol start=\"1\"><li>修改f2etestHost变量为f2etest服务部署的IP地址或域名</li><li>browsers变量修改为本机所部署的浏览器名称，多个浏览器以逗号间隔，浏览器名称和浏览器版本号之间以空格间隔，例如: IE 11,Chrome,Firefox</li></ol><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187915-2a880c53-a291-428b-8736-56b02458eee6.png%22%2C%22originWidth%22%3A1026%2C%22originHeight%22%3A611%2C%22name%22%3A%22image.png%22%2C%22size%22%3A55565%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A513%2C%22height%22%3A306%7D\"></card></p><p><br /></p><h3 id=\"ee330611\">1.12 启动节点</h3><ol start=\"1\"><li>执行<code>rdp\\openAllNode.bat</code>，然后打开一次所有的IE浏览器，进行首次初始化，同时启用所有安全区域的保护模式</li></ol><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187963-4742b558-4780-4ed1-9547-807980725afc.png%22%2C%22originWidth%22%3A2702%2C%22originHeight%22%3A1490%2C%22name%22%3A%22image.png%22%2C%22size%22%3A298751%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A1351%2C%22height%22%3A745%7D\"></card></p><ol start=\"2\"><li>第1步完成后，执行<code>rdp\\initAllNodes.bat</code>，批量添加启动批处理</li></ol><p><br /></p><ol start=\"3\"><li>所有节点初始化完成后，将<code>rdp\\openAllNode.bat</code>添加快捷方式到Administrator账号的系统自动启动文件夹，以实现开机自动打开所有的WebDriver节点</li></ol><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187924-d3059296-996b-4a12-a630-5365e1ef2b54.png%22%2C%22originWidth%22%3A250%2C%22originHeight%22%3A271%2C%22name%22%3A%22image.png%22%2C%22size%22%3A19733%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A125%2C%22height%22%3A136%7D\"></card></p><p><br /></p><ol start=\"4\"><li>命令行输入：<code>netplwiz</code>，在高级用户控制面板中，取消对<code>“要使用本机，用户需输入用户名和密码(E)”</code>项的勾选。系统将弹出窗口要求输入默认登录系统的用户名和密码，输入完成后点击确定</li></ol><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187927-54143e99-2523-4085-991a-4de65ce1c0af.png%22%2C%22originWidth%22%3A467%2C%22originHeight%22%3A503%2C%22name%22%3A%22image.png%22%2C%22size%22%3A41419%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A234%2C%22height%22%3A252%7D\"></card></p><ol start=\"5\"><li style=\"padding-left: 22px;\">重启操作系统，如果正常的话，所有节点在3分钟左右之后应该会自动启动</li></ol><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187934-0efa9554-99c6-4067-ab66-a5b12ab2815d.png%22%2C%22originWidth%22%3A666%2C%22originHeight%22%3A331%2C%22name%22%3A%22image.png%22%2C%22size%22%3A16816%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A333%2C%22height%22%3A166%7D\"></card></p><p><br /></p><p>6.关闭保护模式（需要到每个节点的远程桌面中关闭）</p><p>IE浏览器 -&gt; Ineternet选项，安全，对应4个Tab都需要关闭保护模式，否则报“Unexpected error launching Internet Explorer. Protected Mode settings are not the same for all zones”的错误</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998187942-1d52b0c3-33f9-45ed-ad3a-a2d2bed7f4ff.png%22%2C%22originWidth%22%3A899%2C%22originHeight%22%3A599%2C%22name%22%3A%22image.png%22%2C%22size%22%3A117771%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A746%2C%22height%22%3A497%7D\"></card></p><h2 id=\"a16df528\">二、节点测试与验证</h2><p>使用UIRecorder 示例项目 来进行WebDriver的验证</p><h4 id=\"052d8f63\">2.1 执行UIRecorder测试脚本</h4><p>配置config.json</p><card type=\"block\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22json%22%2C%22code%22%3A%22%7B%5Cn%20%20%20%20%5C%22webdriver%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22host%5C%22%3A%20%5C%22%E4%BD%A0%E7%9A%84webdriver%E8%8A%82%E7%82%B9IP%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22port%5C%22%3A%20%5C%224001%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22browsers%5C%22%3A%20%5C%22ie11%2C%20chrome%5C%22%5Cn%20%20%20%20%7D%5Cn%20%7D%22%2C%22id%22%3A%22Om86h%22%7D\"></card><p>端口是4001对应node01, 以此类推4008对应node08</p><p><br /></p><p>运行测试脚本 source run.sh sample/test.spec.js</p><p><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2019%2Fpng%2F292665%2F1555998188000-669e018a-86e9-434d-9ea4-f2a0c72ae21f.png%22%2C%22originWidth%22%3A545%2C%22originHeight%22%3A368%2C%22name%22%3A%22image.png%22%2C%22size%22%3A48287%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22width%22%3A545%2C%22height%22%3A368%7D\"></card></p><p>验证通过</p><p><br /></p>","public":1,"status":null,"likes_count":5,"comments_count":0,"content_updated_at":"2019-04-23T05:44:30.000Z","deleted_at":null,"created_at":"2019-04-08T10:04:48.000Z","updated_at":"2019-04-23T06:15:22.000Z","published_at":"2019-04-23T05:44:30.000Z","first_published_at":"2019-04-08T10:06:01.000Z","word_count":1105,"cover":null,"description":"一、安装运行本文以Windows Server 2008系统配置为例，后续会出基于WinServer 2016版本的docker镜像1.1 安装并配置远程桌面服务增加角色选择远程桌面服务勾选远程桌面会话主机、远程桌面授权、远程桌面Web访问选择不适用网络级别身份验证授权模式选择按用户选择用户组...","custom_description":null,"_serializer":"v2.doc_detail"}